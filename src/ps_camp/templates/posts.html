{% extends "base.html" %}

{% block content %}
<!-- 直接在內容區塊引入 CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/posts.css') }}">

<!-- Threads 風格的搜尋和篩選頭部 -->
<div class="posts-header">
    <div class="posts-filter">
        <!-- 搜尋框 -->
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="搜尋貼文、作者或內容...">
        </div>
        
        <!-- 篩選標籤 -->
        <div class="filter-tags">
            <button class="filter-tag" data-category="規則">
                <i class="fas fa-gavel"></i>
                規則
            </button>
            <button class="filter-tag" data-category="公告">
                <i class="fas fa-bullhorn"></i>
                公告
            </button>
            <button class="filter-tag" data-category="議題">
                <i class="fas fa-comments"></i>
                議題
            </button>
            <button class="filter-tag" data-category="成立宣言">
                <i class="fas fa-flag"></i>
                成立宣言
            </button>
            <button class="filter-tag" data-category="白皮書">
                <i class="fas fa-file-alt"></i>
                白皮書
            </button>
            
            <!-- 清除篩選按鈕 -->
            <button class="clear-filters">
                <i class="fas fa-times"></i>
                清除
            </button>
        </div>
    </div>
</div>

<div class="posts-container">
    {% for post in posts %}
    <article class="post-card" data-post-id="{{ post.id|string }}">
        <div class="post-header">
            <div class="author-info">
                <div class="author-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="author-details">
                    <h4 class="author-name">{{ post.created_by }}</h4>
                    <span class="post-time">1小時</span>
                </div>
            </div>
            <div class="post-category">
                <span class="category-tag">{{ post.category }}</span>
            </div>
        </div>
        
        <div class="post-content">
            <h3 class="post-title" style="font-weight: bold;">{{ post.title }}</h3>
            <p class="post-text">{{ post.content }}</p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn like-btn">
                <i class="far fa-heart"></i>
                <span>{{ post.likes }}</span>
            </button>
            <button class="action-btn comment-btn">
                <i class="far fa-comment"></i>
                <span>{{ post.replies }}</span>
            </button>
            <button class="action-btn share-btn">
                <i class="fas fa-retweet"></i>
                <span>0</span>
            </button>
            <button class="action-btn bookmark-btn">
                <i class="far fa-bookmark"></i>
            </button>
        </div>
        
        <div class="post-stats">
            <span class="stats-item">{{ post.likes }} 個讚</span>
            <span class="stats-item">{{ post.replies }} 則回覆</span>
            <span class="stats-item">0 次分享</span>
        </div>
    </article>
    {% endfor %}
    
    {% if not posts %}
    <div class="empty-state">
        <i class="fas fa-comments"></i>
        <h3>還沒有任何貼文</h3>
        <p>點擊右下角的 + 按鈕開始發表貼文吧！</p>
    </div>
    {% endif %}
</div>

<!-- 載入更多按鈕 -->
{% if posts %}
<div class="load-more-container">
    <button class="btn btn-outline load-more-btn">
        <i class="fas fa-chevron-down"></i>
        載入更多貼文
    </button>
</div>
{% endif %}

<!-- Threads 風格浮動新增按鈕 -->
{% if session.get("user") %}
<div class="floating-add-btn">
    <a href="{{ url_for('new_post') }}" class="fab-btn" title="發表新貼文">
        <i class="fas fa-plus"></i>
    </a>
</div>
{% endif %}

<!-- 直接在內容區塊引入 JS -->
<script src="{{ url_for('static', filename='js/posts.js') }}"></script>
{% endblock %}